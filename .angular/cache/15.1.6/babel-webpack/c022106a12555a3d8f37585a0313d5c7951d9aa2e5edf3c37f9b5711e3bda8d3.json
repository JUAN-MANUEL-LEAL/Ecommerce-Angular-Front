{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nlet ProductsComponent = class ProductsComponent {\n  set productId(id) {\n    if (id) {\n      this.onShowDetail(id);\n    }\n  }\n  constructor(storeService, productsService) {\n    this.storeService = storeService;\n    this.productsService = productsService;\n    this.myShoppingCart = [];\n    this.total = 0;\n    this.products = [];\n    //@Input() productId: string | null = null\n    this.loadMore = new EventEmitter();\n    this.showProductDetail = false;\n    this.productChosen = null;\n    this.statusDetail = 'init';\n    this.myShoppingCart = this.storeService.getShoppingCart();\n  }\n  onAddToShoppingCart(product) {\n    this.storeService.addProduct(product);\n    this.total = this.storeService.getTotal();\n  }\n  toggleProductDetail() {\n    this.showProductDetail = !this.showProductDetail;\n  }\n  onShowDetail(id) {\n    this.statusDetail = 'loading';\n    if (!this.showProductDetail) {\n      this.showProductDetail = true;\n    }\n    this.productsService.getOne(id).subscribe(data => {\n      this.productChosen = data;\n      this.statusDetail = 'success';\n    }, errorMsg => {\n      window.alert(errorMsg);\n      this.statusDetail = 'error';\n    });\n  }\n  createNewProduct() {\n    const product = {\n      title: 'Nuevo prodcuto',\n      description: 'bla bla bla',\n      images: [`https://placeimg.com/640/480/any?random=${Math.random()}`],\n      price: 1000,\n      categoryId: 2\n    };\n    this.productsService.create(product).subscribe(data => {\n      this.products.unshift(data);\n    });\n  }\n  updateProduct() {\n    if (this.productChosen) {\n      const changes = {\n        title: 'change title'\n      };\n      const id = this.productChosen?.id;\n      this.productsService.update(id, changes).subscribe(data => {\n        const productIndex = this.products.findIndex(item => item.id === this.productChosen?.id);\n        this.products[productIndex] = data;\n        this.productChosen = data;\n      });\n    }\n  }\n  deleteProduct() {\n    if (this.productChosen) {\n      const id = this.productChosen?.id;\n      this.productsService.delete(id).subscribe(() => {\n        const productIndex = this.products.findIndex(item => item.id === this.productChosen?.id);\n        this.products.splice(productIndex, 1);\n        this.showProductDetail = false;\n      });\n    }\n  }\n  onloadMore() {\n    this.loadMore.emit();\n  }\n};\n__decorate([Input()], ProductsComponent.prototype, \"products\", void 0);\n__decorate([Input()], ProductsComponent.prototype, \"productId\", null);\n__decorate([Output()], ProductsComponent.prototype, \"loadMore\", void 0);\nProductsComponent = __decorate([Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.scss']\n})], ProductsComponent);\nexport { ProductsComponent };","map":{"version":3,"names":["Component","EventEmitter","Input","Output","ProductsComponent","productId","id","onShowDetail","constructor","storeService","productsService","myShoppingCart","total","products","loadMore","showProductDetail","productChosen","statusDetail","getShoppingCart","onAddToShoppingCart","product","addProduct","getTotal","toggleProductDetail","getOne","subscribe","data","errorMsg","window","alert","createNewProduct","title","description","images","Math","random","price","categoryId","create","unshift","updateProduct","changes","update","productIndex","findIndex","item","deleteProduct","delete","splice","onloadMore","emit","__decorate","selector","templateUrl","styleUrls"],"sources":["/home/linuxmachine/personalProyects/Angular-router/src/app/website/components/products/products.component.ts"],"sourcesContent":["import { Component, EventEmitter, Input, Output } from '@angular/core';\n\nimport {\n  Product,\n  CreateProductDTO,\n  UpdateProductDTO,\n} from '../../models/product.model';\n\nimport { StoreService } from '../../services/store.service';\nimport { ProductsService } from '../../services/products.service';\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.scss'],\n})\nexport class ProductsComponent {\n  myShoppingCart: Product[] = [];\n  total = 0;\n\n  @Input() products: Product[] = [];\n  @Input()\n  set productId(id: string | null ){\n    if (id) {\n      this.onShowDetail(id)\n    }\n  }\n  //@Input() productId: string | null = null\n  @Output() loadMore = new EventEmitter()\n\n  showProductDetail = false;\n  productChosen: Product | null = null;\n  statusDetail: 'loading' | 'success' | 'error' | 'init' = 'init';\n\n  constructor(\n    private storeService: StoreService,\n    private productsService: ProductsService\n  ) {\n    this.myShoppingCart = this.storeService.getShoppingCart();\n  }\n\n  onAddToShoppingCart(product: Product) {\n    this.storeService.addProduct(product);\n    this.total = this.storeService.getTotal();\n  }\n\n  toggleProductDetail() {\n    this.showProductDetail = !this.showProductDetail;\n  }\n\n  onShowDetail(id: string) {\n    this.statusDetail = 'loading';\n    if (!this.showProductDetail) {\n      this.showProductDetail = true\n    }\n    this.productsService.getOne(id).subscribe(\n      (data) => {\n        this.productChosen = data;\n        this.statusDetail = 'success';\n      },\n      (errorMsg) => {\n        window.alert(errorMsg);\n        this.statusDetail = 'error';\n      }\n    );\n  }\n\n  createNewProduct() {\n    const product: CreateProductDTO = {\n      title: 'Nuevo prodcuto',\n      description: 'bla bla bla',\n      images: [`https://placeimg.com/640/480/any?random=${Math.random()}`],\n      price: 1000,\n      categoryId: 2,\n    };\n    this.productsService.create(product).subscribe((data) => {\n      this.products.unshift(data);\n    });\n  }\n\n  updateProduct() {\n    if (this.productChosen) {\n      const changes: UpdateProductDTO = {\n        title: 'change title',\n      };\n      const id = this.productChosen?.id;\n      this.productsService.update(id, changes).subscribe((data) => {\n        const productIndex = this.products.findIndex(\n          (item) => item.id === this.productChosen?.id\n        );\n        this.products[productIndex] = data;\n        this.productChosen = data;\n      });\n    }\n  }\n\n  deleteProduct() {\n    if (this.productChosen) {\n      const id = this.productChosen?.id;\n      this.productsService.delete(id).subscribe(() => {\n        const productIndex = this.products.findIndex(\n          (item) => item.id === this.productChosen?.id\n        );\n        this.products.splice(productIndex, 1);\n        this.showProductDetail = false;\n      });\n    }\n  }\n\n  onloadMore() {\n    this.loadMore.emit()\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}